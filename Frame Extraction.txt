//Frames Extraction

mov=VideoReader('a.mp4');
get(mov);

mov=VideoReader('a.mp4');
for img=1:mov.NumberOfFrames
filename=strcat('frame',num2str(img),'.jpg');
b=read(mov,img);
imwrite(b,filename);
end

.......................................

%Conversion RGB2Gray

readerobj = VideoReader('a.mp4'); 
vidFrames = read(readerobj);

numFrames=readerobj.NumberOfFrames;
prevFrame = rgb2gray(vidFrames(:,:,:,1));

for k = 2 : numFrames
currFrame = rgb2gray(vidFrames(:,:,:,k));
diffFrame = uint8(abs(double(currFrame) - double(prevFrame)));
mov(k).cdata = cat(3,diffFrame,diffFrame,diffFrame);
mov(k).colormap = [];
filename=strcat('frame',int2str(k), '.jpg');
imwrite(mov(k).cdata,filename);  
prevFrame = currFrame;
end

..............

%Delete Frames based on threshold value

readerobj = VideoReader('Cut4.mp4'); 
vidFrames = read(readerobj);

numFrames=readerobj.NumberOfFrames;
prevFrame = rgb2gray(vidFrames(:,:,:,1));

for k = 1 : numFrames
currFrame = rgb2gray(vidFrames(:,:,:,k));
diffFrame = uint8(abs(double(currFrame) - double(prevFrame)));
mov(k).cdata = cat(3,diffFrame,diffFrame,diffFrame);
mov(k).colormap = [];
filename=strcat('frame',int2str(k), '.jpg');
if diffFrame<200;
delete(filename);
else
imwrite(mov(k).cdata,filename);  
prevFrame = currFrame;
end
end

.........................................

%Delete Frames based on threshold value

readerobj = VideoReader('k.mp4'); 
vidFrames = read(readerobj);

numFrames=readerobj.NumberOfFrames;
prevFrame = rgb2gray(vidFrames(:,:,:,1));

for k = 1 : numFrames
currFrame = rgb2gray(vidFrames(:,:,:,k));
diffFrame = uint8(abs(double(currFrame) - double(prevFrame)));
mov(k).cdata = cat(3,diffFrame,diffFrame,diffFrame);
mov(k).colormap = [];
fnm=k;
if diffFrame<200;
delete(fnm);
else
filename=strcat(int2str(k), '.jpg');
y=colormap(hot(110));
imwrite(currFrame,y,mov(k).cdata,filename); % Re-change it to colored one  
prevFrame = currFrame;
end
end

%Note that when you are creating your frame, I had to replicate the difference frame and make it three channels to mimic a RGB frame. 
%For a grayscale image, the RGB will have each channel to be all the same.
%This was done using the cat command, and I stacked the difference frame in the third dimension three times.